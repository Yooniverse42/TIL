# Hello TS World!

타입스크립트 = 자바스크립트의 확장판

자바스크립트를 더 안전하게 사용할 수 있도록 “타입 관련 기능들을 추가한” 언어

```jsx
// JavaScript
let a = 1;
let b = 2;

console.log(a + b);
```

```tsx
let a: number = 1;
let b: number = 2;

console.log(a + b);
```

자바스크립트는 간단한 프로그래밍을 개발하기 위해 만들짐. 그래서 유연한 문법, 자유로움, 버그 발생 가능성이 높다는 특징들이 있음.

그리고 웹브라우저에서만 사용을 했었기 때문에 이러한 장단점이 있어도 충분했으나 Node.js 탄생 이후에는 웹브라우저 뿐만 아니라 어디서든 실행이 가능하게 됨. = 어떤 프로그램이든 자바스크립트를 이용해서 만들 수 있음.

그래서 엄격한 문법이 아닌 자바스크립트로 간단하지 않은 복잡한 프로그램을 만들다 보니 프로그램의 안정성이 떨어지게 됨. 문제 극복을 위해 타입스크립트가 탄생하게 됨!

### 자바스크립트의 한계점과 타입스크립트

- 정적 타입 시스템
  - 코드를 실행하기 전에 정적으로 변수의 타입을 결정(예: 자바)
  - 그러나 모든 변수에 일일이 타입을 지정해주어야 함. 타이핑 양 증가, 유연하지 못함
- 동적 타입 시스템
  - 코드를 실행하면서 유동적으로 변수의 타입을 결정(예: 자바스크립트)
  - 그러나 코드의 타입 오류를 미리 검사할 수 없음. 예기치 못한 오류가 발생할 수 있음.
- 점진적 타입 시스템
  - 실행 전 검사를 통한 타입 안정성 확보. 자동으로 변수의 타입을 추론함(예: 타입스크립트)

<br />
<br />

## 타입스크립트의 동작 원리

### 대다수의 프로그래밍 언어

JavaScript ⇒ AST(추상 문법 트리) ⇒ 바이트 코드 ⇒ 실행

### 타입스크립트

TypeScript ⇒ AST(추상 문법 트리) ⇒ 타입검사 (실패 시 컴파일 종료) ⇒ (성공 시) JavaScript ⇒ AST(추상 문법 트리) ⇒ 바이트 코드 ⇒ 실행

타입스크립트는 타입검사 후 자바스크립트 코드로 변환 후 안전하게 사용할 수 있다!

<br />
<br />

## Hello TS World!

1. 원하는 폴더 만들고 터미널에서 해당 폴더 들어가기
2. `npm init` 으로 Node.js 패키지 초기화 하기
3. `npm i @types/node`
   ⇒ Node.js가 제공하는 내장 기능들에 대한 타입 정보를 가지고 있는 패키지 설치.
4. `sudo npm i -g typescript`
   ⇒ 타입스크립트 컴파일러 설치. 컴퓨터 전체에 설치하기 위해 글로벌로 설치. 관리자 권한 sudo 붙여주기!
5. `tsc -v` ⇒ 타입스크립트 버전 확인
6. `tsc src/index.ts` ⇒ src/index.ts 파일에 코드 작성 후 컴파일링 해보기
   그럼 자바스크립트 파일이 만들어짐.
7. 코드에 있는 콘솔 출력해보면 잘 됨!
8. `sudo npm i -g tsx` ⇒ 하지만 계속 컴파일링 하면 귀찮잖아요? 그래서 ‘tsx’라는 도구를 사용할거임.
9. `tsx src/index.ts` ⇒ 자바스크립트로 변환하지 않아도 바로 실행해줌

<br />
<br />

## 타입스크립트 컴파일러 옵션 설정하기

타입크립트의 컴파일 과정에서는 내가 작성한 코드에 오류가 없는지 검사하고 오류가 없다면 자바스크립트로 변환함. 여기서 `컴파일러 옵션`을 통해 얼마나 엄격하게 타입 오류를 검사할지, 자바스크립트 코드의 버전은 어떻게 할지 등 설정할 수 있다.  
컴파일러 옵션은 Node.js 패키지 단위로 설정 가능하다. `TSC` 도구를 이용하면 기본적인 옵션이 자동으로 설정되어 컴파일러 옵션 파일을 자동으로 만들 수가 있다.

```bash
tsx --init
```

명령어를 이용하여 초기화를 하면 tsconfig.json파일이 생성된다.

<br />

### include

include 항목을 생성하면 `tsx src/index.ts` 할 필요 없이 `tsx` 만으로도 컴파일이 가능하다.

```json
{
  "include": ["src"]
}
```

<br />

### target

생성되는 자바스크립트 코드의 버전을 설정할 수 있다.

만약 target항목에 “ES5”로 설정하면 ts파일에서 화살표 함수를 사용하더라도, 컴파일된 파일은 함수 표현식으로 변환한다

```json
{
  "compilerOptions": {
    "target": "ESNext" // ESNext는 자바스크립트 최신 버전을 의미함
  }
}
```

<br />

### module

- CommonJS
- ESM (ECMASciprt 모듈 시스템)

```json
{
  "compilerOptions": {
    "module": "ESNext"
  }
}
```

<br />

### outDir

컴파일 결과 생성될 자바스크립트 파일들 위치 지정

```json
{
  "compilerOptions": {
    "outDir": "dist"
  }
}
```

<br />

### strict

엄격한 타입 검사

```json
{
  "compilerOptions": {
    "strict": true
  }
}
```

<br />

### moduleDetection

자바스크립트에선 개별 파일을 개별 모듈로 취급받아서 변수가 같아도 파일만 다르다면 문제가 되지 않지만, 타입스크립트에서는 파일을 전역 모듈로 본다.

그러면 변수를 다르게 써야 하나? 그럼 파일을 따로 쓸 이유가 없어짐.

- 해결 방법 1
  모듈 시스템을 사용하는 `export {};` 또는 `import` 같은 문법 키워드를 파일 내에서 한 번이라도 작성하면 이 파일은 독립된 모듈(격리된 모듈)로 바라보기 시작
- 해결 방법 2
  tsconfig.json에 moduleDetection 추가

```json
{
  "compilerOptions": {
    "moduleDetection": "force"
  }
}
```

tsconfig에 옵션을 추가하게 되면 자바스크립트 변환할 때 자동으로 `export {}` 가 생성된다.

<br />

### skipLibCheck

타입 정의 파일(`.d.ts` 확장자 파일)의 타입 검사를 생략하는 옵션

보통 타입 정의 파일은 라이브러리에서 사용하는데, 가끔 라이브러리의 타입 정의 파일에서 타입 오류가 발생할 수 있음. 그래서 해당 옵션은 true로 설정하여 불필요한 타입 정의 파일의 타입 검사를 생략하도록 설정해야함.

```json
{
  "compilerOptions": {
    "skipLibCheck": true
  }
}
```
