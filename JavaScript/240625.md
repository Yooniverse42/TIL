# ì‹¤ìŠµ(ëœë¤ ë‹¤ì´ìŠ¤), ë¹„ë™ê¸° í†µì‹ 

- [1. ì£¼ì ‘ìƒì„±ê¸°](#1-ì£¼ì ‘ìƒì„±ê¸°)
- [2. ëœë¤ ë‹¤ì´ìŠ¤](#2-ëœë¤-ë‹¤ì´ìŠ¤)
  - [2-1. ì£¼ì‚¬ìœ„ êµ´ë¦¬ê¸° ë²„íŠ¼](#2-1-ì£¼ì‚¬ìœ„-êµ´ë¦¬ê¸°-ë²„íŠ¼)
  - [2-2. ê¸°ë¡ ë° ì´ˆê¸°í™” ë²„íŠ¼](#2-2-ê¸°ë¡-ë°-ì´ˆê¸°í™”-ë²„íŠ¼)
- [3. ë¹„ë™ê¸° í†µì‹ ](#3-ë¹„ë™ê¸°-í†µì‹ )
  - [3-1. Rest API](#3-1-Rest-API)
  - [3-2. ë¹„ë™ê¸° í†µì‹ ì˜ 2ê°€ì§€ ë°©ë²•](#3-2-ë¹„ë™ê¸°-í†µì‹ ì˜-2ê°€ì§€-ë°©ë²•)
  - [3-3. xhr-Thunder Client](#3-3-xhr-thunder-client)
  - [3-4. xhr.js ë§Œë“¤ê¸°](#3-4-xhrjs-ë§Œë“¤ê¸°)
    - [3-4-1. JASON dataë¡œ ë³´ë‚´ê¸°](#3-4-1-jason-dataë¡œ-ë³´ë‚´ê¸°)


## 1. ì£¼ì ‘ìƒì„±ê¸°

## 2. ëœë¤ ë‹¤ì´ìŠ¤

### 2-1. ì£¼ì‚¬ìœ„ êµ´ë¦¬ê¸° ë²„íŠ¼

ğŸ²Â ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì£¼ì‚¬ìœ„ê°€ ëŒì•„ê°€ê³  ğŸ²Â ë‹¤ì‹œ í•œ ë²ˆ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì£¼ì‚¬ìœ„ê°€ ë©ˆì¶”ë„ë¡ í•´ë³´ì

```jsx
// 1. ì£¼ì‚¬ìœ„ ì• ë‹ˆë©”ì´ì…˜
// import ì´ê²ƒì €ê²ƒ ê°€ì ¸ì˜¤ì„¸ìš©.

// ë²„íŠ¼ë“¤ì„ ì£¼ì‚¬ìœ„ êµ´ë¦¬ê¸°, ê¸°ë¡, ì´ˆê¸°í™” ì°¨ë¡€ë¡œ ë³€ìˆ˜ì— ë‹´ê¸° ìœ„í•´ ë°°ì—´ êµ¬ì¡° ë¶„í•´í• ë‹¹ ì‚¬ìš©!
const [rollingButton, recordButton, resetButton] = getNodes('.buttonGroup > button');

// í´ë¡œì € ì‚¬ìš©í•´ì„œ ë³€ìˆ˜ë“¤ì„ ìº¡ìŠí™” ì‹œí‚¤ê¸°!
// ë°©ë²• 1
function handleRollingDice() {
  
  let isClicked = false;
  let stopAnimation;

  return () => {
    if(!isClicked){
      console.log('í´ë¦­ ì²« ë²ˆì§¸');
      stopAnimation = setInterval(diceAnimation, 100);
    }else{
      console.log('í´ë¦­ ë‘ ë²ˆì§¸');
      // clearInterval ì‚¬ìš©í•  ë• setInterval ì—ì„œ ë‚˜ì˜¨ ê°’ì„ ë„£ì–´ì•¼ ì‹¤í–‰ì´ ë¨!
      // ê·¸ë˜ì„œ ì–´ë– í•œ ë³€ìˆ˜ì— ë‹´ì•„ì•¼ í•˜ëŠ”ë°, ifë¬¸ ì•ˆì—ì„œ ë°”ë¡œ letì´ë‚˜ constì— ë‹´ê²Œ ë˜ë©´,
      // ë¸”ë¡ ìŠ¤ì½”í”„ë¥¼ ê°€ì§€ê²Œ ë˜ì„œ elseë¬¸ì—ì„œëŠ” ì‚¬ìš©í•˜ì§€ ëª»í•˜ê²Œ ëœë‹¤.
      // ê·¸ë˜ì„œ if..else ë¬¸ ë°–ì—ì„œ "let stopAnimation;" ì„ ë§Œë“¤ì–´ ë‘”ê±°ì„!
      // ê·¸ë˜ì„œ ifë¬¸ì—ì„œë„, else ë¬¸ì—ì„œë„ ê°™ì€ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë¨.
      clearInterval(stopAnimation);
    }
  
    isClicked = !isClicked
  }
}

// í´ë¡œì €! "handleRollingDice" ê¹Œì§€ë§Œ ì“°ë©´ ì•ˆìª½ í•¨ìˆ˜ ë³¸ë¬¸ì´ ë‚˜ì˜´. 
// ê·¸ë˜ì„œ "handleRollingDice()" ê¹Œì§€ ì¨ì¤˜ì•¼í•¨.
rollingButton.addEventListener('click', handleRollingDice())
```

ë˜ëŠ” í•¨ìˆ˜ ì„ ì–¸ë¬¸ì´ ì•„ë‹Œ ë°”ë¡œ ì‹¤í–‰ í•¨ìˆ˜ë¡œ ë¶ˆëŸ¬ì™€ë³´ì

```jsx
// ë°©ë²• 2
const handleRollingDice = (() => {
  /* ë™ì¼ */
})()

// ì¦‰ì‹œ ì‹¤í–‰í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ì„œ ë°”ë¡œ ì‹¤í–‰ì´ ëœê±°ë‹ˆ í˜¸ì¶œí•  ë• '()' ë¹¼ê³  
// handleRollingDiceë§Œ ì ì–´ë„ ë¨.
rollingButton.addEventListener('click',handleRollingDice)
```

<br>

### 2-2. ê¸°ë¡ ë° ì´ˆê¸°í™” ë²„íŠ¼

ğŸš¨ ìƒì„± í•¨ìˆ˜ì™€ ê¸°ë¡ í•¨ìˆ˜ë¥¼ ë¶„ë¦¬í•´ì„œ ì‚¬ìš©í•˜ê¸°! ì•„ì£¼ ì¤‘ìš”!!

```jsx
const [rollingButton, recordButton, resetButton] = getNodes('.buttonGroup > button');
const recordListWrapper = getNode('.recordListWrapper')

let count = 0;
let total = 0;

// ìƒì„± í•¨ìˆ˜
function createItem(diceValue){
  const template = `
    <tr>
      <td>${++count}</td>
      <td>${diceValue}</td>
      <td>${total += diceValue}</td>
    </tr>
  `
  return template;
}

// ê¸°ë¡ í•¨ìˆ˜
function renderRecordItem(){
  const diceValue = getNode('#cube').getAttribute('dice');
  // ë˜ëŠ” const diceValue = +attr(getNode('#cube'), 'dice');
  
  insertLast('.recordList tbody', createItem(diceValue));
  
  endScroll(recordListWrapper);
}
```

```jsx
// ì£¼ì‚¬ìœ„ êµ´ë¦¬ê¸° ë²„íŠ¼
const handleRollingDice = (() => {

  
  let isClicked = false;
  let stopAnimation;

  return ()=>{
    if(!isClicked){
      stopAnimation  = setInterval(diceAnimation, 100);
      recordButton.disabled = true;
      resetButton.disabled = true;
    }
    else{
      clearInterval(stopAnimation);
      recordButton.disabled = false;
      resetButton.disabled = false;
    }
    isClicked = !isClicked;
  }
})()
```

```jsx
// ê¸°ë¡ ë²„íŠ¼
function handleRecord(){
  recordListWrapper.hidden = false;

  renderRecordItem(); // ê¸°ë¡ í•¨ìˆ˜
}
```

```jsx
// ì´ˆê¸°í™” ë²„íŠ¼
function handleReset(){
  recordListWrapper.hidden = true;
  clearContents('tbody');
  count = 0;
  total = 0;
}
```

```jsx
// ì´ë²¤íŠ¸
rollingButton.addEventListener('click', handleRollingDice);
recordButton.addEventListener('click', handleRecord);
resetButton.addEventListener('click', handleReset);
```

<br><br><br>

## 3. ë¹„ë™ê¸° í†µì‹ 

ë™ê¸° = sync, ë¹„ë™ê¸° = async  
ë¹„ë™ê¸° í†µì‹  = Asynchronous Javascript And XML (ajax, ì—ì´ì ìŠ¤)

![](https://github.com/Yooniverse42/TIL/blob/main/JavaScript/images/240625-image-01.png?raw=true)
<small>ì¶œì²˜ : ë©‹ìŸì´ì‚¬ìì²˜ëŸ¼ ë²”ìŒ¤</small>

ë™ê¸°ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” ì‚¬ì´íŠ¸ ê²½ìš°, í•˜ë‚˜ë§Œ í´ë¦­í•´ë„ ëª¨ë“  ë°ì´í„°ë¥¼ ë‹¤ì‹œ ì„œë²„ë¡œë¶€í„° ì‘ë‹µë°›ê¸° ë•Œë¬¸ì— ì¦‰, ì „ì²´ë¥¼ ë‹¤ì‹œ ë¶ˆëŸ¬ì˜¤ê²Œ ë˜ì–´ ì‚¬ì´íŠ¸ ì „ì²´ê°€ ê¹œë¹¡âœ¨ ê±°ë¦¬ê²Œ ë¨.

ê·¸ë˜ì„œ ë¹„ë™ê¸° í†µì‹ ì„ ì´ìš©í•˜ì—¬ ì›í•˜ëŠ” ë°ì´í„°ë§Œ ì—ì´ì ìŠ¤ ì—”ì§„ì„ ê±°ì³ì„œ ì„œë²„ì— ìš”ì²­í•˜ê³  ê·¸ ì„œë²„ëŠ” ì œì´ìŠ¨ì˜ í˜•íƒœë¡œ ì‘ë‹µ ë°›ìŒ. ì„œë²„ì™€ ìš”ì²­ ë° ì‘ë‹µì„ ì£¼ê³  ë°›ì„ ë• `string` ìœ¼ë¡œ í•´ì•¼í•¨! ê·¸ë˜ì„œ `JASON.stringify`, `JSON.parse` í•„ìš” í–ˆì—ˆìŒ!

> ğŸ¤” ***ì™œ JASONìœ¼ë¡œ ë°ì´í„°ë¥¼ ë³´ë‚´ëŠ”ë° ì™œ ì´ë¦„ì€ XML ì¸ê°€ìš”?*** ğŸ¤”  
â†’ ì˜ˆì „ì— ì¼ëŠ”ë°(ê·¼ë³¸ì´ XMLì…ë‹ˆë‹¤), ìš”ì¦˜ì€ ë” ì‰½ê²Œ ì“¸ ìˆ˜ ìˆëŠ” ì œì´ìŠ¨ìœ¼ë¡œ í†µì‹ ì„ ì£¼ê³ ë°›ìŠµë‹ˆë‹¹~
> 

ğŸ” ***ajaxê°€ í•„ìš”í•œ ì´ìœ ëŠ”?*** 

- Ajax Web API ìš”ì²­ (ì„œë²„ì— ë°ì´í„°ë¥¼ ë°›ì•„ì˜¬ ë•Œ)
- íŒŒì¼ ì½ê¸° (ì„œë²„ì— íŒŒì¼ì„ ì½ì–´ì™€ì•¼ í•  ë•Œ)
- íŒŒì¼ ì“°ê¸° (í´ë¼ì´ì–¸íŠ¸ ë‹¨ì—ì„œ ë°ì´í„°ë¥¼ ìƒì„±í•  ë•Œ )
- íŒŒì¼ ìˆ˜ì • (í´ë¼ì´ì–¸íŠ¸ ë‹¨ì—ì„œ ë°ì´í„°ë¥¼ ìˆ˜ì •í•  ë•Œ )
- íŒŒì¼ ì œê±° (í´ë¼ì´ì–¸íŠ¸ ë‹¨ì—ì„œ ë°ì´í„°ë¥¼ ì œê±°í•  ë•Œ)
- ì•”í˜¸í™” / ë³µí˜¸í™”
- ì˜ˆì•½ ì‘ì—… (íŠ¹ì • ë‚ ì§œì™€ ì‹œê°„ì— ì‘ì—…ì„ ìˆ˜í–‰í•  ë•Œ)

<br>

### 3-1. Rest API

iOS, Android ë“± ë‹¤ì–‘í•œ í”Œë«í¼ì€ í•˜ë‚˜ì˜ ì„œë²„ì—ì„œ ê´€ë¦¬í•¨.

í•˜ì§€ë§Œ í”Œë«í¼ë§ˆë‹¤ ì–¸ì–´ê°€ ë‹¤ë¥´ì§€ë§Œ í•˜ë‚˜ì˜ ì„œë²„ê°€ ì•Œì•„ë“¤ì„ ìˆ˜ ìˆë„ë¡ `REST API Architecture` ê°€ ë‚˜ì˜¨ê±°ì„. ë‹¤ì–‘í•œ í”Œë«í¼ì—ì„œ CRUD(= ìƒíƒœë¥¼ ì´ë™í•˜ëŠ”ë° í‘œí˜„í•œ ë°©ì‹)ë¥¼ ì„œë²„ í†µì‹ ì— ì •í•´ì§„ ê·œì¹™, í‘œì¤€ìœ¼ë¡œ ì •í–ˆê³  ê·¸ CRUDëŠ” http(s)ë¥¼ ë”°ë¥´ë©°, ì´ê²ƒì´ ë°”ë¡œ ***REST API*** ì…ë‹ˆë‹¹.

![](https://github.com/Yooniverse42/TIL/blob/main/JavaScript/images/240625-image-02.png?raw=true)
<small>ì¶œì²˜ : ë©‹ìŸì´ì‚¬ìì²˜ëŸ¼ ë²”ìŒ¤</small>

> CRUD  
= REST API í†µì‹ ìœ¼ë¡œ POST(Create), GET(Read), PUT(Update, ì „ì²´ ìˆ˜ì •), DELETE(Delete) í•˜ëŠ” ê²ƒì„, ì°¸ê³ ë¡œ PATCH(update)ëŠ” ì¼ë¶€ ìˆ˜ì •ì„ ìœ„í•œ ê²ƒì´ë‹¤.
> 

ë°ì´í„°ë¥¼ ì„œë²„ë¡œ ë³´ë‚´ë©´ ì•„ë˜ì— ìˆëŠ” ìƒíƒœ ì½”ë“œë¥¼ ì´ìš©í•˜ì—¬ ì„±ê³µ  ìœ ë¬´ ë“± ì•Œ ìˆ˜ ìˆìŒ.

![](https://github.com/Yooniverse42/TIL/blob/main/JavaScript/images/240625-image-03.png?raw=true)
<small>ì¶œì²˜ : ë©‹ìŸì´ì‚¬ìì²˜ëŸ¼ ë²”ìŒ¤</small>

- `200 ~` : ì„±ê³µ!
- `400 ~` : ë‚´ê°€ ì˜ëª» ë³´ëƒ„!
- `500 ~` : ì„œë²„ ë¬¸ì œ!

<br>

### 3-2. ë¹„ë™ê¸° í†µì‹ ì˜ 2ê°€ì§€ ë°©ë²•

**Ajax API**

- xhr
- fetch

![](https://github.com/Yooniverse42/TIL/blob/main/JavaScript/images/240625-image-04.png?raw=true)

![](https://github.com/Yooniverse42/TIL/blob/main/JavaScript/images/240625-image-05.png?raw=true)
<small>ì¶œì²˜ : ë©‹ìŸì´ì‚¬ìì²˜ëŸ¼ ë²”ìŒ¤</small>

<br>

### 3-3. xhr-Thunder Client

VSCodeì˜ í™•ì¥í”„ë¡œê·¸ë¨ì¸ Thunder Clientë¡œ ê°„ë‹¨í•˜ê²Œ í™•ì¸í•  ìˆ˜ ìˆìŒ.  
https://jsonplaceholder.typicode.com/users

ìœ„ ë§í¬ëŠ” ì„œë²„ê°€ ì œê³µí•˜ëŠ” ì •ë³´ì„.  
ìœ„ ë§í¬ë¥¼ Thunder Clientì— ë“¤ì–´ê°€ì„œ `Send` ë³´ë‚¸ í›„ **CURD** ì‚¬ìš© ê°€ëŠ¥

![](https://github.com/Yooniverse42/TIL/blob/main/JavaScript/images/240625-image-06.png?raw=true)

Send ì•ì— CURD ë°”ê¿”ì„œ ì‚¬ìš©í•˜ë©´ ë¨

- ì°¾ì•„ë³´ê¸° (GET- ì„œë²„ì— ìš”ì²­ ë³´ë‚´ê¸°)

```jsx
https://jsonplaceholder.typicode.com/users/3
// ë§ˆì§€ë§‰ì— 3, 5 ì´ëŸ° ìˆ«ìëŠ” users ì¤‘ì— ë‚´ê°€ 3ë²ˆ ê°€ì ¸ì˜¤ê²Œë‹¤ê³  í•œê±°ì„.
// ì´ê±´ ì‚¬ì´íŠ¸ ë§ˆë‹¤ ê°€ì ¸ì˜¤ëŠ” ë°©ì‹ì´ ë‹¤ë¥¸ë° ì´ ë§í¬ëŠ” /3 í•˜ë©´ 3ë²ˆì´ ê°€ì ¸ì™€ì§„ë‹¤.
```

- ê²€ìƒ‰í•˜ê¸°

```jsx
https://jsonplaceholder.typicode.com/users/?q=suite
```

- ì‚­ì œí•˜ê¸° (DELETE)

```jsx
https://jsonplaceholder.typicode.com/users/3
```

- ë‹¤ì‹œ ê°€ì ¸ì˜¤ê¸°(GET) â†’ ì•„ê¹Œ ì‚­ì œ í–ˆìœ¼ë¯€ë¡œ ì‚­ì œê°€ ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŒ

- ìƒì„±í•˜ê¸°(POST í†µì‹ ) â†’ Body íƒ­ì—ì„œ ë°ì´í„° ìƒì„± í•˜ë©´ Response íƒ­ì— ë‚˜ì˜´

```jsx
https://jsonplaceholder.typicode.com/users/5
```

- PUT í†µì‹  â†’ ì‹¹ ë‹¤ ë°”ë€œ, Body íƒ­ì—ì„œ ë°ì´í„° ìˆ˜ì •
- PATCH í†µì‹  â†’ ì¼ë¶€ ìˆ˜ì •ë¨

<br>

### 3-4. `xhr.js` ë§Œë“¤ê¸°

> xhrì€ [readyState] ë¼ëŠ” 5ë‹¨ê³„ì˜ ìƒíƒœë¥¼ ê°€ì§„ë‹¤.
> 
> - `0` : uninitialized
> - `1` : loading
> - `2` : loaded
> - `3` : ineractive
> - `4` : complete

```jsx
// í†µì‹  ì‚¬ì´íŠ¸
const ENDPOINT = 'https://jsonplaceholder.typicode.com/users';
const xhr = new XMLHttpRequest(); // (1)

// open ì•ˆì— ì–´ë–¤ í†µì‹  ì“¸ê±´ì§€ ë„£ìœ¼ë©´ ë¨! 'GET', 'POST' ë“±ë“±
xhr.open('GET', ENDPOINT);
// console.log( xhr.response ); // (2)

xhr.addEventListener('readystatechange', () => { // (3)
  const {readyState, status, response} = xhr;
  // ì´ë ‡ê²Œ êµ¬ì¡° ë¶„í•´í• ë‹¹ì„ í•˜ë©´ "xhr.readyState" ëŒ€ì‹  ë°”ë¡œ "readyState"ë¡œ ì‚¬ìš© ê°€ëŠ¥.

  if(readyState === 4) {
    if(status >= 200 && status < 400) {
      console.log(xhr.response);
    }
    else {
      console.log('ì‹¤íŒ¨!');
    }
  }
})

xhr.send();
```

`(1)` : ìƒì„±ì í•¨ìˆ˜ëŠ” ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ê³  ê·¸ ì¸ìŠ¤í„´ìŠ¤ëŠ” ê°ì²´! ê·¸ë˜ì„œ ì„œë²„ì— ìˆëŠ” ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ ë³€ìˆ˜ì— ë‹´ì•„ ë†“ê³  ì‚¬ìš©í•  ì˜ˆì •. `console.log(xhr);` ë¥¼ í•˜ë©´ ê°ì²´ê°€ ë‚˜ì˜¤ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

`(2)` : ì—¬ê¸°ì„œ ì½˜ì†”ë¡œê·¸ë¥¼ ì´ìš©í•˜ì—¬ `response` ê°’ì„ ì–»ìœ¼ë ¤ê³  í•˜ë©´, ì½˜ì†”ì— ì•„ë¬´ê²ƒë„ ë‚˜ì˜¤ì§€ ì•ŠëŠ”ë‹¤. ê·¸ ì´ìœ ëŠ” ìš”ì²­ ì‹œ ì‘ë‹µì„ ë°›ì§€ë§Œ.. ë°”ë¡œ ìœ„ì— ìˆëŠ” `xhr.open('GET', ENDPOINT);` ê°€ ì‘ë‹µì„ ë°›ëŠ” ì‹œê°„ì´ ìˆê¸° ë•Œë¬¸ì´ë‹¤. í•˜ì§€ë§Œ ì½˜ì†”ë¡œê·¸ëŠ” ê¸°ë‹¤ë¦¬ì§€ ì•Šê³  ë°”ë¡œ ì‹¤í–‰í•´ë²„ë¦¬ê¸° ë•Œë¬¸ì—, ì¦‰ ì‘ë‹µì„ ë‹¤ ë°›ê¸° ì „ì— ê°’ì„ ì–»ìœ¼ë ¤ê³  í–ˆê¸° ë•Œë¬¸ì— ì•„ë¬´ê²ƒë„ ë‚˜ì˜¤ì§€ ì•Šê²Œ ëœë‹¤.

`(3)` : ê·¸ë˜ì„œ ì‘ë‹µì´ ëë‚¬ë‹¤ëŠ” `readyState === 4` ì¡°ê±´ì„ ì´ìš©í•´ì„œ ì‘ë‹µì´ ëë‚œ í›„ ì„±ê³µí–ˆì„ ë•Œì™€ ì‹¤íŒ¨ í–ˆì„ ë•Œë¥¼ ë‚˜ëˆˆ í•¨ìˆ˜ë¥¼ ë§Œë“¤ê²Œ ëœ ê²ƒì´ë‹¤. ì‘ë‹µì´ ì˜ ëë‚¬ìœ¼ë©° ì„±ê³µì ì¸ ì‘ë‹µì„ ë°›ì•˜ì„ ë•Œ `response` ê°’ì„ ì œëŒ€ë¡œ ë°›ì„ ìˆ˜ ìˆë‹¤. 

<br>

#### 3-4-1. JASON dataë¡œ ë³´ë‚´ê¸°

```jsx
const ENDPOINT = 'https://jsonplaceholder.typicode.com/users';

const user = {
  name: 'yooni',
  age: 20,
  gender: 'female'
} // ì œì´ìŠ¨ì— ë¬¸ìë¡œ ë³´ë‚´ì! ê·¸ë¦¬ê³  sendì— ì‹¤ì–´ ë³´ë‚´ì!

const xhr = new XMLHttpRequest()
xhr.open('POST', ENDPOINT); // userë¥¼ ê°ì²´ë¡œ ë³´ë‚´ë³´ì!
xhr.setRequestHeader('Content-Type', 'application/json'); // (1)

xhr.addEventListener('readystatechange', () => {
	/* ë™ì¼ */
})

xhr.send(JSON.stringify(user));
```

`(1)` : user ê°ì²´ë¥¼ JASON data í˜•ì‹ìœ¼ë¡œ ë³´ë‚´ì•¼ í•˜ê¸° ë•Œë¬¸ì— `JSON.stringify(user)` ë¥¼ ì´ìš©í•˜ì—¬ ë¬¸ìì—´ë¡œ ë³€ê²½í•´ì„œ ë³´ë‚´ì•¼ í•œë‹¤. í•˜ì§€ë§Œ userëŠ” ë¬¸ìì—´ì´ ì•„ë‹Œ ê°ì²´ì´ë¯€ë¡œ â€œë‚œ ì‚¬ì‹¤ ê°ì²´ì•¼! ê°ì²´ë¡œ í•´ì„í•´ì¤˜!â€ ë¼ëŠ” ì‚¬ìš©ì„¤ëª…ì„œë¥¼ ë³´ë‚´ê¸° ìœ„í•´ ì‚¬ìš©í•œ ê²ƒì´ë‹¤.

`ê°œë°œìí™˜ê²½ -> ë„¤íŠ¸ì›Œí¬ -> Fetch/XHR -> users -> í—¤ë” -> ìš”ì²­ í—¤ë” -> Content-Type: text/plain;charset=UTF-8` 
ì—¬ê¸°ì„œ Content-Type ì— ë¬¸ìê°€ ì•„ë‹Œ ê°ì²´ë¡œ ë³€ê²½í•˜ê¸° ìœ„í•´ `xhr.setRequestHeader('Content-Type', 'application/json')` ì„ ì¶”ê°€ë¡œ ì‘ì„±í•¨. ê·¸ëŸ¼ application/json ì´ë¼ê³  ë³€ê²½ë˜ì„œ ë‚˜ì˜¤ê³ , ë‚´ê°€ ì›í•˜ëŠ” ëŒ€ë¡œ user ê°ì²´ ì „ì²´ê°€ ë¬¸ìì—´ì´ ì•„ë‹Œ ê°ì²´ë¡œ ì½˜ì†”ì— ì˜ ì°í˜.

ğŸ ***ì¬ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ë³´ì! (ëª¨ë“ˆ ë§Œë“¤ê¸°~)***

```jsx
function xhr(method,url,body, ì„±ê³µ, ì‹¤íŒ¨){
  const xhr = new XMLHttpRequest();
  
  xhr.open(method,url);
  xhr.setRequestHeader('Content-Type','application/json');

  xhr.addEventListener('readystatechange',()=>{
    const {readyState,status,response} = xhr;
    
    if(readyState === 4){ 
      if(status >= 200 && status < 400){
        // console.log(response); // (1)
        
        // ì½˜ì†”ë¡œê·¸ì— ë³´ì´ëŠ”ê²Œ ë¬¸ì œê°€ ì•„ë‹˜. ê°’ì´ í•„ìš”í•˜ë¯€ë¡œ dataë¼ëŠ” ë³€ìˆ˜ì— ë‹´ìŒ.
        const data = JSON.parse(response);

        // ê·¸ë¦¬ê³  ì½œë°±í•¨ìˆ˜ì— ë‹´ê¸°
        ì„±ê³µ(data);
      }
      else{
        ì‹¤íŒ¨('ì‹¤íŒ¨!');
      }
    }
  })

  xhr.send(JSON.stringify(body))
}

// ì–´ë–¤ í†µì‹ ì„ í• ê±´ì§€, ì–´ë””ì— í†µì‹ í• ê±´ì§€, ì–´ë–¤ ë°ì´í„°ë¥¼ ë„£ì„ê±´ì§€
xhr('POST', ENDPOINT, user)
xhr('GET', ENDPOINT)
```

`(1)` : responseë§Œ ì½˜ì†”ì— ì¶œë ¥í•˜ë©´ ë¬¸ìì—´ë¡œ ë‚˜ì˜¤ë¯€ë¡œ Parseë¡œ ë°›ì•„ì•¼ í•¨! `console.log(JSON.parse(response));` 

***ì ì‹œ! ì½œë°±í•¨ìˆ˜!! ì´ê²Œ ë­ëƒ!***

```jsx
function ë©”ì¸í•¨ìˆ˜(a, b, ì½œë°±í•¨ìˆ˜ë°›ìŒ){
	ë¨¸ì‹œê¸° ì €ì‹œê¸° a
	ì–´ì©Œêµ¬ ì €ì©Œêµ¬ b
	
	const data = ì–´ë–¤ ë°ì´í„°
	ì½œë°±í•¨ìˆ˜ë°›ìŒ(data)
	
}

function ì½œë°±í•¨ìˆ˜(c) {
	c = ì´ëŸ¬ì¿µ ì €ëŸ¬ì¿µ
	console.log(c)
}

ë©”ì¸í•¨ìˆ˜(Aì¸ì, Bì¸ì, ì½œë°±í•¨ìˆ˜)
// ì½œë°±í•¨ìˆ˜ë¥¼ í˜¸ì¶œì´ ì•„ë‹Œ ë³¸ë¬¸ ìì²´ë¥¼ ë„˜ê²¨ì•¼ í•¨
// ê·¸ë˜ì•¼ ë©”ì¸í•¨ìˆ˜ì—ì„œ dataë¥¼ ì¸ìˆ˜ë¡œ ë°›ì•„ì„œ ë©”ì¸í•¨ìˆ˜ ì•ˆì—ì„œ ì‹¤í–‰í•˜ëŠ”ê±°ì„
```

ê·¼ë° ì–´ì°¨í”¼ ì½œë°±í•¨ìˆ˜ ë³¸ë¬¸ ìì²´ë¥¼ ë„£ì„ê±°ë©´ ì½œë°±í•¨ìˆ˜ë¥¼ í•¨ìˆ˜ì„ ì–¸ë¬¸ìœ¼ë¡œ ì‘ì„±í•˜ì§€ ë§ê³  ì¸ìˆ˜ì— ë°”ë¡œ ë„£ì! ë¼ëŠ” ì–˜ê¸°ì„. ê·¸ë˜ì„œ

```jsx
function ë©”ì¸í•¨ìˆ˜(a, b, ì½œë°±í•¨ìˆ˜ë°›ìŒ){
	ë¨¸ì‹œê¸° ì €ì‹œê¸° a
	ì–´ì©Œêµ¬ ì €ì©Œêµ¬ b
	
	const data = ì–´ë–¤ ë°ì´í„°
	ì½œë°±í•¨ìˆ˜ë°›ìŒ(data)
	
}

ë©”ì¸í•¨ìˆ˜(Aì¸ì, Bì¸ì, ì½œë°±í•¨ìˆ˜(c){...})
// ë” ì¤„ì—¬ì“°ë©´? êµ³ì´ ì½œë°±í•¨ìˆ˜ ì´ë¦„ì€ í•„ìš” ì—†ìœ¼ë‹ˆê¹Œ! ì‚¬ìš©í•˜ì§€ ì•Šì•˜ì£ ?
ë©”ì¸í•¨ìˆ˜(Aì¸ì, Bì¸ì, (c)=>{...})
```

ê·¼ë° ë§¤ê°œë³€ìˆ˜ë¥¼ ìˆœì„œëŒ€ë¡œ ì ì§€ ì•ŠëŠ”ë‹¤ê±°ë‚˜.. ì•„ë¬´ê²ƒë„ ì ì§€ ì•ŠëŠ”ë‹¤ë©´~ ë¶ˆí¸ë¶ˆí¸

ê·¸ëŸ¬ë‹ˆê¹Œ ê°ì²´ë¥¼ ë§¤ê°œë³€ìˆ˜ì—ì„œ ê¸°ë³¸ê°’ì„ ì„¤ì •í•´ì£¼ê³  êµ¬ì¡°ë¶„í•´ í• ë‹¹ì„ í•˜ì!

```jsx
function xhr({ method = 'GET', url = '', body = null, ì„±ê³µ = null, ì‹¤íŒ¨ = null,
  headers = { 'Content-Type':'application/json', 'Access-Control-Allow-Origin':'*'}}) {

	// ì—¬ê¸°ì„œë¶€í„° í•¨ìˆ˜ ë‚´ë¶€
  const xhr = new XMLHttpRequest();

  xhr.open(method, url);

  Object.entries(headers).forEach(([key,value])=>{
    xhr.setRequestHeader(key,value)
  })

  xhr.addEventListener('readystatechange', () => {
    const { readyState, status, response } = xhr;

    if (readyState === 4) {
      if (status >= 200 && status < 400) {
        const data = JSON.parse(response);
        ì„±ê³µ(data);
      }
      else {
        ì‹¤íŒ¨('ì‹¤íŒ¨!');
      }
    }
  });

  xhr.send(JSON.stringify(body));
}
```

ì¨‹ë“  ì½œë°±í•¨ìˆ˜ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” ì¬ì‚¬ìš©ì„ í•˜ê¸° ìœ„í•¨ì„. ë©”ì¸í•¨ìˆ˜ ì•ˆì—ì„œ ë‹¤ ì²˜ë¦¬í•˜ê²Œ ë˜ë©´, ë­ í•˜ë‚˜ ë°”ë€Œê²Œ ë˜ë©´ ë©”ì¸í•¨ìˆ˜ë¥¼ ì‚¬ìš© ëª»í•´ì„œ..?!

ê·¼ë° í•¨ìˆ˜ëŠ” ê°ì²´ì£ ? ê·¸ë˜ì„œ ë©”ì„œë“œë¥¼ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤..

ê·¸ëƒ¥ xhr.get() ì´ëŸ°ì‹ìœ¼ë¡œ ê°„ë‹¨í•˜ê²Œ ì“°ê³  ì‹¶ë‹¨ ë§ì´ì§€.. ê·¸ë˜ì„œ

```jsx
xhr.get = (url,ì„±ê³µ,ì‹¤íŒ¨) =>{
  xhr({ url, ì„±ê³µ, ì‹¤íŒ¨ })
}

xhr.post = (url,body,ì„±ê³µ,ì‹¤íŒ¨) =>{
  xhr({ 
    method:'POST',
    body,
    url, 
    ì„±ê³µ, 
    ì‹¤íŒ¨
   })
}

xhr.put = (url,body,ì„±ê³µ,ì‹¤íŒ¨) =>{
  xhr({ 
    method:'PUT',
    body,
    url, 
    ì„±ê³µ, 
    ì‹¤íŒ¨
   })
}

xhr.delete = (url,ì„±ê³µ,ì‹¤íŒ¨) =>{
  xhr({ 
    method:'DELETE',
    url, 
    ì„±ê³µ, 
    ì‹¤íŒ¨
   })
}
```

í™€ë¦¬ëª°ë¦¬ ì–´ë µë‹¤